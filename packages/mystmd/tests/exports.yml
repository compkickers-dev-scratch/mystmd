cases:
  - title: Forced JATS export writes to _build directory
    cwd: basic-md-and-config
    command: myst build --jats --force index.md
    outputs:
      - path: basic-md-and-config/_build/exports/index.xml
        content: outputs/basic-md-and-config.xml
  - title: Export with no config works
    cwd: no-config
    command: myst build --jats index.md -o _build/index.xml
    outputs:
      - path: no-config/_build/index.xml
        content: outputs/basic-md-and-config.xml
  - title: Basic tex build
    cwd: basic-tex
    command: myst build --tex
    outputs:
      - path: basic-tex/_build/out.tex
        content: outputs/basic-tex.tex
  - title: Basic tex math build
    cwd: basic-tex-math
    command: myst build --tex
    outputs:
      - path: basic-tex-math/_build/out.tex
        content: outputs/basic-tex-math.tex
  - title: Basic typst build
    cwd: basic-typst
    command: myst build --typst
    outputs:
      - path: basic-typst/_build/out.typ
        content: outputs/basic-typst.typ
  - title: Templated tex build
    cwd: templated-tex
    command: myst build --tex --ci
    outputs:
      - path: templated-tex/_build/out.tex
        content: outputs/templated-tex.tex
  - title: Export frontmatter overrides project frontmatter
    cwd: export-fm-override
    command: myst build --tex --ci
    outputs:
      - path: export-fm-override/_build/out.tex
        content: outputs/templated-tex.tex
  - title: Multi-page tex export with default toc
    cwd: multi-page-toc-tex
    command: myst build --tex --ci
    outputs:
      - path: multi-page-toc-tex/_build/out.tex
        content: outputs/multi-page-tex.tex
      - path: multi-page-toc-tex/_build/out-one.tex
        content: outputs/multi-page-tex-one.tex
      - path: multi-page-toc-tex/_build/out-two.tex
        content: outputs/multi-page-tex-two.tex
      - path: multi-page-toc-tex/_build/out-three.tex
        content: outputs/multi-page-tex-three.tex
  - title: Multi-page tex export with explicit articles
    cwd: multi-page-articles-tex
    command: myst build --tex --ci
    outputs:
      - path: multi-page-articles-tex/_build/out.tex
        content: outputs/multi-page-tex.tex
      - path: multi-page-articles-tex/_build/out-one.tex
        content: outputs/multi-page-tex-one.tex
      - path: multi-page-articles-tex/_build/out-two.tex
        content: outputs/multi-page-tex-two.tex
      - path: multi-page-articles-tex/_build/out-three.tex
        content: outputs/multi-page-tex-three.tex
  - title: Multi-page tex export frontmatter overrides
    cwd: multi-page-override-tex
    command: myst build --tex --ci
    outputs:
      - path: multi-page-override-tex/_build/out.tex
        content: outputs/multi-page-tex.tex
      - path: multi-page-override-tex/_build/out-one.tex
        content: outputs/multi-page-tex-one.tex
      - path: multi-page-override-tex/_build/out-two.tex
        content: outputs/multi-page-tex-two.tex
      - path: multi-page-override-tex/_build/out-three.tex
        content: outputs/multi-page-tex-three.tex
  - title: Notebook exports to tex; frontmatter from first cell only
    cwd: notebook-with-fm
    command: myst build --tex --ci
    outputs:
      - path: notebook-with-fm/_build/out.tex
        content: outputs/notebook.tex
  - title: Templated tex with glossary
    cwd: glossary
    command: myst build --tex --ci
    outputs:
      - path: glossary/_build/out.tex
        content: outputs/glossary.tex
  - title: Templated tex with acronym
    cwd: acronym
    command: myst build --tex --ci
    outputs:
      - path: acronym/_build/out.tex
        content: outputs/acronym.tex
  - title: Recursive includes resolve
    cwd: include-recursive
    command: myst build --typst
    outputs:
      - path: include-recursive/_build/out.typ
        content: outputs/include-recursive.typ
  - title: Circular includes resolve with errors
    cwd: include-circular
    command: myst build --typst
    outputs:
      - path: include-circular/_build/out.typ
        content: outputs/include-circular.typ
  - title: Strange DOIs resolve as expected
    cwd: dois
    command: myst build --tex --ci
    outputs:
      - path: dois/_build/out.tex
        content: outputs/dois.tex
      - path: dois/_build/main.bib
        content: outputs/dois.bib
  - title: Basic site build
    cwd: basic-site
    command: myst build
    outputs:
      - path: basic-site/_build/site/content/index.json
        # Keys and file hashes are removed from this output file
        content: outputs/basic-site-content.json
      - path: basic-site/_build/site/config.json
        content: outputs/basic-site-config.json
      - path: basic-site/_build/site/myst.xref.json
        content: outputs/basic-site-myst.xref.json
  - title: XRef site build
    cwd: site-xrefs
    command: myst build
    outputs:
      - path: site-xrefs/_build/site/content/index.json
        content: outputs/site-xrefs-index.json
      - path: site-xrefs/_build/site/content/targets.json
        content: outputs/site-xrefs-targets.json
      - path: site-xrefs/_build/site/config.json
        content: outputs/site-xrefs-config.json
      - path: site-xrefs/_build/site/myst.xref.json
        content: outputs/site-xrefs-myst.xref.json
